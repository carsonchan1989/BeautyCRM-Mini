<view class="container">
  <!-- 标题栏 -->
  <view class="header">
    <view class="back-button" bindtap="goToHome">
      <text class="back-icon">←</text>
      <text>返回</text>
    </view>
    <view class="title">历史报告</view>
    <view class="create-button" bindtap="createNewReport">
      <text>新建</text>
    </view>
  </view>
  
  <!-- 错误信息 -->
  <view class="error-message" wx:if="{{errorMessage}}">
    <icon type="warn" size="18"></icon>
    <text>{{errorMessage}}</text>
  </view>
  
  <!-- 报告列表 -->
  <view class="report-list">
    <view class="report-item" 
          wx:for="{{reports}}" 
          wx:key="key"
          bindtap="viewReportDetail"
          data-id="{{item.customerId}}"
          data-date="{{item.date}}">
      <view class="report-info">
        <view class="customer-info">
          <text class="customer-name">{{item.customerName}}</text>
          <view class="customer-tags">
            <text class="customer-tag">{{item.customerGender}}</text>
            <text class="customer-tag" wx:if="{{item.customerAge}}">{{item.customerAge}}岁</text>
            <text class="customer-tag" wx:if="{{item.customerLevel}}">{{item.customerLevel}}</text>
          </view>
        </view>
        <view class="report-date">生成日期: {{item.date}}</view>
        <view class="report-preview">{{item.report.substring(0, 100) + '...'}}</view>
      </view>
      <view class="report-actions">
        <view class="action-view">查看</view>
        <view class="action-delete" 
              catchtap="deleteReport" 
              data-id="{{item.customerId}}">
          删除
        </view>
      </view>
    </view>
    
    <!-- 空列表提示 -->
    <view class="empty-tip" wx:if="{{reports.length === 0 && !isLoading}}">
      <icon type="info" size="60" color="#999"></icon>
      <text>暂无历史报告</text>
      <text class="sub-tip">点击右上角"新建"生成报告</text>
    </view>
    
    <!-- 加载状态 -->
    <view class="loading-state" wx:if="{{isLoading}}">
      <view class="loading-icon"></view>
      <text>加载中...</text>
    </view>
  </view>
  
  <!-- 底部提示 -->
  <view class="footer-tip" wx:if="{{reports.length > 0}}">
    <text>点击报告卡片可查看详情</text>
  </view>
</view>